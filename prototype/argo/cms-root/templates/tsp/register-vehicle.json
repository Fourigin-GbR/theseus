{
  "form": "register-vehicle",
  "validationPatterns": {
    "nameplates": {
      "pattern": "[A-ZÖÜÄ]{1,3}\\s?[\\s-]\\s?[A-ZÖÜÄ]{1,2} [1-9]{1}[0-9]{1,3}",
      "validExamples": [
        "B NN 123",
        "B-NN 123"
      ]
    },
    "bank-account-codes": {
      "pattern": "^(DE[0-9]{2})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{2})\\s?$",
      "validExamples": [
        "DExx xxxx xxxx xxxx xxxx xx"
      ]
    }
  },
  "dataNormalizers": {
    "iban-normalizer": {
      "targetClass": "com.fourigin.argo.forms.normalizer.RegexDataNormalizer",
      "settings": {
        "selection-pattern": "^(DE[0-9]{2})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{2})\\s?$",
        "replacement-pattern": "$1$2$3$4$5$6"
      }
    },
    "nameplate-normalizer": {
      "targetClass": "com.fourigin.argo.forms.normalizer.RegexDataNormalizer",
      "settings": {
        "selection-pattern": "^\\s*([A-ZÖÜÄ]{1,3})\\s*[\\s-]\\s*([A-ZÖÜÄ]{1,2}) ([1-9]{1}[0-9]{1,3})\\s*$",
        "replacement-pattern": "$1-$2 $3"
      }
    }
  },
  "dataFormatters": {
    "iban-formatter": {
      "targetClass": "com.fourigin.argo.forms.formatter.RegexDataFormatter",
      "settings": {
        "selection-pattern": "^(DE[0-9]{2})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{4})\\s?([0-9]{2})\\s?$",
        "replacement-pattern": "$1 $2 $3 $4 $5 $6"
      }
    }
  },
  "fields": {
    "customer.id": {
        "type": "HIDDEN",
        "validation": {
            "mandatory": true
        }	  	
    },
    "vehicle.existing-nameplate": {
      "type": "TEXT",
      "validation": {
        "pattern": "nameplates"
      },
      "normalizer": "nameplate-normalizer"
    },
    "vehicle.new-nameplate": {
      "type": "CHOOSE",
      "validation": {
        "mandatory": true
      },
      "values": {
        "portal": {
          "nameplate-customer-requirements": {
            "type": "TEXT",
            "validation": {
              "mandatory": true
            }
          }
        },
        "self": {
          "nameplate-customer-reservation": {
            "type": "TEXT",
            "validation": {
              "mandatory": true,
              "pattern": "nameplates"
            },
            "normalizer": "nameplate-normalizer"
          }
        },
        "random": null
      }
    },
    "vehicle-data.ident": {
      "type": "TEXT",
      "validation": {
        "mandatory": true
      }
    },
    "vehicle-data.vehicle-id": {
      "type": "TEXT",
      "validation": {
        "mandatory": true
      }
    },
    "vehicle-data.leasing": {
      "type": "CHECK"
    },
    "vehicle-insurance.id": {
      "type": "TEXT",
      "validation": {
        "mandatory": true
      }
    },
    "tax.account": {
      "type": "CHOOSE",
      "validation": {
        "mandatory": true
      },
      "values": {
        "use-stored-account": {
          "stored-account": {
            "type": "CHOOSE",
            "values": {
              "account-1": null,
              "account-2": null
            },
            "externalValueReference": {
              "owner": "customer",
              "value": "stored-accounts"
            }
          }
        },
        "use-new-account": {
          "new-account-code": {
            "type": "TEXT",
            "validation": {
              "mandatory": true,
              "pattern": "bank-account-codes"
            },
            "normalizer": "iban-normalizer",
            "formatter": "iban-formatter"
          },
          "new-account-bankcode": {
            "type": "TEXT",
            "validation": {
              "mandatory": true
            }
          },
          "new-account-bankname": {
            "type": "TEXT",
            "validation": {
              "mandatory": true
            }
          },
          "new-account-owner": {
            "type": "TEXT"
          }
        }
      }
    },
    "payment.methods": {
      "type": "CHOOSE",
      "validation": {
        "mandatory": true
      },
      "values": {
        "cash": null,
        "paypal": null,
        "sofort": null,
        "pre-payment": null,
        "debit-from-existing-account": {
          "stored-account": {
            "type": "CHOOSE",
            "values": {
              "account-1": null,
              "account-2": null
            },
            "externalValueReference": {
              "owner": "customer",
              "value": "stored-accounts"
            }
          }
        },
        "debit-from-new-account": {
          "new-account-code": {
            "type": "TEXT",
            "validation": {
              "mandatory": true,
              "pattern": "bank-account-codes"
            },
            "normalizer": "iban-normalizer",
            "formatter": "iban-formatter"
          },
          "new-account-bankcode": {
            "type": "TEXT",
            "validation": {
              "mandatory": true
            }
          },
          "new-account-bankname": {
            "type": "TEXT",
            "validation": {
              "mandatory": true
            }
          },
          "new-account-owner": {
            "type": "TEXT"
          }
        }
      }
    },
    "handover.options": {
      "type": "CHOOSE",
      "validation": {
        "mandatory": true
      },
      "values": {
        "office-delivering": null,
        "pickup": null
      }
    }
  },
  "objectMappings": {
    "vehicle-registration": {
      "targetClass": "com.fourigin.argo.forms.models.VehicleRegistration",
      "settings": {
        "file": "register-vehicle/vehicle-registration-mapper.groovy"
      }
    }
  }
}